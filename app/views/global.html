<h1 class="page-header">{{i18n("myLibraryList")}}</h1>
<div class="row-fluid">
  <div class="span3">
    <div ui-scrollfix="90">
      <ul class="nav nav-list well well-small" style="width:268px;">
        <li class="nav-header">List</li>
        <li>
          <form class="form-search">
            <div class="input-append">
              <input accesskey="f" class="search-query" type="search" ng-model="search.$" placeholder="{{i18n('search')}}">
              <button tooltip="Search from global site" class="btn" ng-click="query()"><i class="icon-search"></i></button>
            </div>
          </form>
        </li>
        <li class="divider"></li>
        <li ng-if="filtered.length === 0" class="muted">There is no library.</li>
        <li ng-repeat="i in filtered track by $index">
          <a ng-if="$state.is('global')" smooth-scroll="#{{i.libraryKey}}" scroll-easing="easeInOutBack" scroll-duration="slow" scroll-offset="-30">{{i.label}}</a>
          <a ng-if="$state.is('global.detail')" ng-href="#/global/detail/{{i.libraryKey}}">{{i.label}}</a>
        </li>
        <li>
      <pagination data-boundary-links="true" data-num-pages="noOfPages" data-current-page="currentPage" max-size="maxSize" class="pagination-small" data-previous-text="&laquo;" data-next-text="&raquo;"></pagination>
        </li>
        <li ng-if="next">
          <a ng-click="showMore()">Show more library</a>
        </li>
      </ul>

    </div><!-- /scrollfix -->
  </div><!-- /left side bar-->
  <div ng-if="$state.is('global.detail')" class="span9 library-list" ui-view></div>
  <div ng-if="$state.is('global')" class="span9 library-list">
    <div class="row-fluid" ng-repeat="item in filtered track by $index" ng-controller="GlobalLibraryCtrl">
      <div id="{{item.libraryKey}}" class="span12">
          <h2 class="page-header">
            <a href="#/global/detail/{{item.libraryKey}}">{{item.label}}</a>
          </h2>
          <div ng-show="!modify">
            <div class="pull-right">
              <div>{{i18n("registeredAt")}} : {{item.registeredAt | date}}</div>
              <div>{{i18n("modifiedAt")}} : {{item.modifiedAt | date}}</div>
            </div> <!-- right dates -->
            <div ng-show="item.desc" ng-bind-html="item.desc | escape | break2br">
            </div>
            <div ng-hide="item.desc" class="clearfix">
              (No description)
            </div>
            <hr/>
            <div class="btn-group">
              <a class="btn btn-link" href="{{item.sourceUrl}}" target="_blank">
                <i class="icon-external-link"></i> {{i18n("viewSource")}}
              </a>
              <button ng-if="!item.isMyLibrary && !item.isStocked" popover="If you stocked global library,this library will be shown in Script Editor's library assistant." popover-trigger="mouseenter" popover-placement="bottom" class="btn btn-link" ng-click="stock()">
                <i class="icon-pushpin"></i> Stock library
              </button>
              <button ng-if="!item.isMyLibrary && item.isStocked" popover="If you unstocked global library,this library will not be shown in Script Editor's library assistant." popover-trigger="mouseenter" popover-placement="bottom" class="btn btn-link" ng-click="unStock()">
                <i class="icon-pushpin"></i> UnStock library
              </button>
            </div>
          </div><!--detail-->
      </div> <!--library casset-->
    </div><!-- repeat-->
  </div><!-- /right-->
</div>